<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Kurrentschrifthilfe</title>
		<!-- Diese HTML-Datei wurde 2023 von Andreas Heese erstellt, bei Github veröffentlicht und steht unter der unter der Creative Commons-Lizenz CC-BY sowie der GPL. -->
		<!-- Der verwendete Schriftfont WiegelKurrent.unz1tB.ttf ist von http://www.peter-wiegel.de/WiegelKurrent.html heruntergeladen und steht unter der unter der Creative Commons-Lizenz CC-BY, GPL mit Font-Exception und/oder SIL Open Font License. -->
		<!-- Die Fontdateien wiegelkurrent.unz1tb-webfont.woff, wiegelkurrent.unz1tb-webfont.woff2 und wiegelkurrent.unz1tb-webfont.svg wurden aus der Truetype-Fontdatei WiegelKurrent.unz1tB.ttf mit Hilfe von https://www.fontsquirrel.com/tools/webfont-generator in die Formate WOFF, WOFF2 und SVG umgewandelt und stehen ebenfalls der unter der Creative Commons-Lizenz CC-BY, GPL mit Font-Exception und/oder SIL Open Font License zur Verfügung. -->
		<style>
			@font-face {
				font-family: "Kurrent";
				src:
					url('WiegelKurrent.unz1tB.ttf') format('truetype'),
					url('wiegelkurrent.unz1tb-webfont.woff') format('woff'),
					url('wiegelkurrent.unz1tb-webfont.woff2') format('woff2'),
					url('wiegelkurrent.unz1tb-webfont.svg') format('svg');
			}
			textarea { width:100%; height: 5em; font-size: 150%; }
			div#target { font-family: Kurrent; font-size: 250% }
		</style>
	</head>
	<body>
		<h1>Kurrentschrifthilfe</h1>
		<p>In das Feld eingegebener Text wird darunter in Kurrentschrift dargestellt</p>
		<div>
			<textarea id="source" placeholder="Eingabe" autofocus></textarea>
		</div>
		<div id="target"></div>
		<script>
			document.getElementById('source').addEventListener ('keyup', function (event) {
				let str = this.value;
				// Verarbeitung bei der Eingabe (wirkt sich auf Eingabetext und Kurrentdarstellung aus)
				// Bei Eingabe $ durch rundes s ersetzen
				if (event.which == 52 && event.shiftKey == true) {
					str = str.substring(0, str.length - 1);
					str += 's'; // rundes s
					this.value = str;
				}
				// Bei Eingabe kleines s durch langes s ersetzen
				if (event.which == 83 && event.shiftKey == false) {
					str = str.substring(0, str.length - 1);
					str += 'ſ'; // langes s
					this.value = str;
				}
				// Bei Eingabe eines Leerzeiches nach s (Wortende) langes s wieder durch rundes s ersetzen
				if (event.which == 32 && str.substr(str.length - 2, 1) == 'ſ') {
					str = str.substring(0, str.length - 2);
					str += '&#xF509; '; // rundes s ohne Nachstrich und folgendes Leerzeichen
					this.value = str;
				}
				// Verarbeitung für den Text im div (wirkt sich nicht auf Eingabetext und nur auf Kurrentdarstellung aus)
				// Erster Buchstabe des Wortes ohne Anstrich
				str = str.replace(/( a)/g,' &#xF500;'); // a 
				str = str.replace(/( ä)/g,' &#xF501;'); // ä 
				str = str.replace(/( g)/g,' &#xF504'); // g 
				str = str.replace(/( o)/g,' &#xF505'); // o 
				str = str.replace(/( ö)/g,' &#xF506'); // ö 
				str = str.replace(/( q)/g,' &#xF508'); // q 
				// Letzter Buchstabe des Wortes ohne Nachstrich
				str = str.replace(/(d )/g,'&#xF503; '); // d 
				str = str.replace(/(p )/g,'&#xF507; '); // p 
				str = str.replace(/(s )/g,'&#xF509; '); // rundes s 
				str = str.replace(/(v )/g,'&#xF50E; '); // v
				str = str.replace(/(w )/g,'&#xF50F; '); // w
				str = str.replace(/(x )/g,'&#xF510; '); // x
				str = str.replace(/(I )/g,'&#xF512; '); // I
				str = str.replace(/(O )/g,'&#xF513; '); // O
				// Doppelbuchstaben durch Einzelbuchstaben mit Überstrich ersetzen
				str = str.replace(/(mm)/g,'&#xE5D2;');
				str = str.replace(/(nn)/g,'&#xE5DC;');
				// Ligaturen darstellen
				str = str.replace(/(ch)/g,'&#xF1BB;');
				str = str.replace(/(ck)/g,'&#xEEC4;');
				str = str.replace(/(St)/g,'&#xF4F8;');
				str = str.replace(/(tz)/g,'&#xEEDC;');
				// Umgewandelten Kurrenttext darstellen
				document.getElementById('target').innerHTML = str;
			});
		</script>
	</body>
</html>
