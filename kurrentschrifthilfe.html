<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Kurrentschrifthilfe</title>
		<!-- Diese HTML-Datei wurde 2023 von Andreas Heese erstellt, bei Github unter https://github.com/AndreasHeese/kurrent veröffentlicht und steht unter der unter der Creative Commons-Lizenz CC-BY sowie der GPL. -->
		<!-- Der verwendete Schriftfont WiegelKurrent.unz1tB.ttf ist von http://www.peter-wiegel.de/WiegelKurrent.html heruntergeladen und steht unter der unter der Creative Commons-Lizenz CC-BY, GPL mit Font-Exception und/oder SIL Open Font License. -->
		<!-- Die Fontdateien wiegelkurrent.unz1tb-webfont.woff, wiegelkurrent.unz1tb-webfont.woff2 und wiegelkurrent.unz1tb-webfont.svg wurden aus der Truetype-Fontdatei WiegelKurrent.unz1tB.ttf mit Hilfe von https://www.fontsquirrel.com/tools/webfont-generator in die Formate WOFF, WOFF2 und SVG umgewandelt und stehen ebenfalls der unter der Creative Commons-Lizenz CC-BY, GPL mit Font-Exception und/oder SIL Open Font License zur Verfügung. -->
		<style>
			@font-face {
				font-family: "Kurrent";
				src:
					url('WiegelKurrent.unz1tB.ttf') format('truetype'),
					url('wiegelkurrent.unz1tb-webfont.woff') format('woff'),
					url('wiegelkurrent.unz1tb-webfont.woff2') format('woff2'),
					url('wiegelkurrent.unz1tb-webfont.svg') format('svg');
			}
			body { font-size: clamp(1rem, 3vw, 1.4rem); }
			textarea { width:100%; height: 5em; font-size: clamp(2rem, 3.5vw, 3rem); }
			#target { font-family: Kurrent; font-size: clamp(3rem, 5vw, 4rem); }
			#mehrSpan { display:none; }
		</style>
		<script>
			// Event input beim Laden anstoßen, damit bei Browsern, die sich Eingaben merken, die Kurrentdarstellung bereits nach dem Laden angezeigt wird
			window.onload = function () {
				document.getElementById('source').dispatchEvent(new Event('input', { 'bubbles': true }));
			}
			
			// Zusatzinformationen über Button ein- und ausblendbar
			function toggledisplay(e) {
				if (document.getElementById('mehrSpan').style.display == 'inline') {
					document.getElementById('mehrSpan').style.display = 'none';
					document.getElementById('mehrBtn').textContent = '>'
				} else {
					document.getElementById('mehrSpan').style.display = 'inline';
					document.getElementById('mehrBtn').textContent = '<';
				}
			};
		</script>
	</head>
	<body>
		<h1>Kurrentschrifthilfe</h1>
		<p>In das Feld eingegebener Text wird darunter in Kurrentschrift dargestellt. Der Buchstabe s erzeugt das lange s und das Zeichen $ das runde s. <span id="mehrSpan">Am Wortende wird nach Eingabe eines Leerzeichens das lange s automatisch in ein rundes s umgewandelt. Innerhalb von zusammengesetzten Wörter muss das runde s manuell mit $ gesetzt werden, z.B. "da$selbe" ("dasſelbe"), siehe auch <a href="https://de.wikipedia.org/wiki/Langes_s#Regeln_von_1901" target="_blank">Regeln von 1901</a>. In der Kurrentdarstellung werden ch, ck, St und tz als Ligaturen geschrieben und Doppel-m und -n werden durch die Einzelbuchstaben mit Überstrich ersetzt. Einige Buchstaben werden am Wortanfang ohne Anstrich und am Wortende ohne Nachstrich dargestellt.<br/>Die Copyrightnotiz (u.a. GPL) befindet sich im Quelltext. Der für die Kurrentschrift verwendete Font ist <a href="http://www.peter-wiegel.de/WiegelKurrent.html" target="_blank">WiegelKurrent.unz1tB</a> von Peter Wiegel. </span><button id="mehrBtn" onclick="toggledisplay();">&gt;</button></p>
		<div>
			<textarea id="source" placeholder="Eingabe" autofocus></textarea>
		</div>
		<div id="target"></div>
		<script>
			const inputHandler = function(e) {
				let str = this.value;
				// Verarbeitung für den Text in der textarea (wirkt sich auf Eingabetext und folgend auf Kurrentdarstellung aus)
				str = str.replace(/(s)/g,'ſ'); // rundes s zu langem s
				str = str.replace(/(ſ )/g,'s '); // langes s am Wortende zurück zu rundem s (ohne Nachstrich erst für Kurrentfont)
				// Umgewandelten Eingabetext darstellen
				document.getElementById('source').value = str;
				// Verarbeitung für den Text im div (wirkt sich nicht auf Eingabetext und nur auf Kurrentdarstellung aus)
				str = str.replace(/(\$)/g,'s'); // $ zu rundem s
				// Erster Buchstabe des Wortes ohne Anstrich
				str = str.replace(/( a)/g,' &#xF500;'); // a 
				str = str.replace(/( ä)/g,' &#xF501;'); // ä 
				str = str.replace(/( g)/g,' &#xF504'); // g 
				str = str.replace(/( o)/g,' &#xF505'); // o 
				str = str.replace(/( ö)/g,' &#xF506'); // ö 
				str = str.replace(/( q)/g,' &#xF508'); // q 
				// Letzter Buchstabe des Wortes ohne Nachstrich
				str = str.replace(/(s )/g,'&#xF509; '); // rundes s 
				str = str.replace(/(v )/g,'&#xF50E; '); // v
				str = str.replace(/(w )/g,'&#xF50F; '); // w
				str = str.replace(/(I )/g,'&#xF512; '); // I
				str = str.replace(/(O )/g,'&#xF513; '); // O
				// Doppelbuchstaben durch Einzelbuchstaben mit Überstrich ersetzen
				str = str.replace(/(mm)/g,'&#xE5D2;');
				str = str.replace(/(nn)/g,'&#xE5DC;');
				// Ligaturen darstellen
				str = str.replace(/(ch)/g,'&#xF1BB;');
				str = str.replace(/(ck)/g,'&#xEEC4;');
				str = str.replace(/(St)/g,'&#xF4F8;');
				str = str.replace(/(tz)/g,'&#xEEDC;');
				// Für Zeilenumbruch Return durch <br/> ersetzen
				str = str.replace(/[\r\n]/g,'<br/>');
				// Umgewandelten Kurrenttext darstellen
				document.getElementById('target').innerHTML = str;
			};
			
			document.getElementById('source').addEventListener('input', inputHandler);
		</script>
	</body>
</html>
